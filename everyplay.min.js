(function(){function t(e,i,n){var r=t.resolve(e),s=t.modules[r];if(null==r){n=n||e;i=i||"root";throw new Error('failed to require "'+n+'" from "'+i+'"')}if(!s.exports){s.exports={};s.client=s.component=true;s.call(this,s,s.exports,t.relative(r))}return s.exports}t.modules={};t.aliases={};t.resolve=function(e){var i=e,n=e+".js",r=e+".json",s=e+"/index.js",o=e+"/index.json";return t.modules[n]&&n||t.modules[r]&&r||t.modules[s]&&s||t.modules[o]&&o||t.modules[i]&&i||t.aliases[s]};t.normalize=function(t,e){var i=[];if("."!=e.charAt(0))return e;t=t.split("/");e=e.split("/");for(var n=0;n<e.length;++n){if(".."==e[n]){t.pop()}else if("."!=e[n]&&""!=e[n]){i.push(e[n])}}return t.concat(i).join("/")};t.register=function(e,i){t.modules[e]=i};t.alias=function(e,i){var n=t.modules[e];if(!n)throw new Error('failed to alias "'+e+'", it does not exist');t.aliases[i]=e};t.relative=function(e){var i=t.normalize(e,"..");function n(t,e){var i=t.length;while(i--){if(t[i]===e)return i}return-1}function r(i){var n=i;i=r.resolve(i);return t(i,e,n)}r.resolve=function(r){if("."!=r.charAt(0)){var s=e.split("/");var o=n(s,"deps")+1;if(!o)o=0;r=s.slice(0,o+1).join("/")+"/deps/"+r;return r}return t.normalize(i,r)};r.exists=function(e){return!!t.modules[r.resolve(e)]};return r};t.register("component-url/index.js",function(t,e,i){e.parse=function(t){var e=document.createElement("a");e.href=t;return{href:e.href,host:e.host||location.host,port:e.port||location.port,hash:e.hash,hostname:e.hostname||location.hostname,pathname:e.pathname,protocol:!e.protocol||":"==e.protocol?location.protocol:e.protocol,search:e.search,query:e.search.slice(1)}};e.isAbsolute=function(t){return 0==t.indexOf("//")||!!~t.indexOf("://")};e.isRelative=function(t){return!e.isAbsolute(t)};e.isCrossDomain=function(t){t=e.parse(t);return t.hostname!==location.hostname||t.port!==location.port||t.protocol!==location.protocol}});t.register("visionmedia-superagent/lib/client.js",function(t,e,i){var n=i("emitter");var r="undefined"==typeof window?this:window;function s(){}function o(){if(r.XMLHttpRequest&&("file:"!=r.location.protocol||!r.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}}return false}var a="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function c(t){return t===Object(t)}function u(t){if(!c(t))return t;var e=[];for(var i in t){e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]))}return e.join("&")}y.serializeObject=u;function l(t){var e={};var i=t.split("&");var n;var r;for(var s=0,o=i.length;s<o;++s){r=i[s];n=r.split("=");e[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}return e}y.parseString=l;y.types={html:"text/html",json:"application/json",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};y.serialize={"application/x-www-form-urlencoded":u,"application/json":JSON.stringify};y.parse={"application/x-www-form-urlencoded":l,"application/json":JSON.parse};function p(t){var e=t.split(/\r?\n/);var i={};var n;var r;var s;var o;e.pop();for(var c=0,u=e.length;c<u;++c){r=e[c];n=r.indexOf(":");s=r.slice(0,n).toLowerCase();o=a(r.slice(n+1));i[s]=o}return i}function h(t){return t.split(/ *; */).shift()}function f(t){return t.split(/ *; */).reduce(function(t,e){var i=e.split(/ *= */),n=i.shift(),r=i.shift();if(n&&r)t[n]=r;return t},{})}function d(t,e){e=e||{};this.xhr=t;this.text=t.responseText;this.setStatusProperties(t.status);this.header=p(t.getAllResponseHeaders());this.setHeaderProperties(this.header);this.body=this.parseBody(this.text)}d.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=h(e);var i=f(e);for(var n in i)this[n]=i[n]};d.prototype.parseBody=function(t){var e=y.parse[this.type];return e?e(t):null};d.prototype.setStatusProperties=function(t){var e=t/100|0;this.status=t;this.statusType=e;this.info=1==e;this.ok=2==e;this.clientError=4==e;this.serverError=5==e;this.error=4==e||5==e;this.accepted=202==t;this.noContent=204==t||1223==t;this.badRequest=400==t;this.unauthorized=401==t;this.notAcceptable=406==t;this.notFound=404==t;this.forbidden=403==t};d.prototype.toError=function(){var t="got "+this.status+" response";var e=new Error(t);e.status=this.status;return e};y.Response=d;function v(t,e){var i=this;n.call(this);this._query=this._query||[];this.method=t;this.url=e;this.header={};this.set("X-Requested-With","XMLHttpRequest");this.on("end",function(){i.callback(null,new d(i.xhr))})}v.prototype=new n;v.prototype.constructor=v;v.prototype.timeout=function(t){this._timeout=t;return this};v.prototype.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};v.prototype.abort=function(){if(this.aborted)return;this.xhr.abort();this.emit("abort");this.aborted=true;this.clearTimeout();return this};v.prototype.set=function(t,e){if(c(t)){for(var i in t){this.set(i,t[i])}return this}this.header[t.toLowerCase()]=e;return this};v.prototype.type=function(t){this.set("Content-Type",y.types[t]||t);return this};v.prototype.query=function(t){if("string"!=typeof t)t=u(t);this._query.push(t);return this};v.prototype.send=function(t){var e=c(t);var i=this.header["content-type"];if(e&&c(this._data)){for(var n in t){this._data[n]=t[n]}}else if("string"==typeof t){if(!i)this.type("form");i=this.header["content-type"];if("application/x-www-form-urlencoded"==i){this._data=this._data?this._data+"&"+t:t}else{this._data=(this._data||"")+t}}else{this._data=t}if(!e)return this;if(!i)this.type("json");return this};v.prototype.callback=function(t,e){var i=this._callback;if(2==i.length)return i(t,e);if(t)return this.emit("error",t);i(e)};v.prototype.end=function(t){var e=this;var i=this.xhr=o();var n=this._query.join("&");var r=this._timeout;var a=this._data;this._callback=t||s;i.onreadystatechange=function(){if(4==i.readyState&&0!=i.status)e.emit("end")};if(r&&!this._timer){this._timer=setTimeout(function(){var t=new Error("timeout of "+r+"ms exceeded");t.timeout=r;e.callback(t);e.abort()},r)}if(n){n=y.serializeObject(n);this.url+=~this.url.indexOf("?")?"&"+n:"?"+n}i.open(this.method,this.url,true);if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a){var c=y.serialize[this.header["content-type"]];if(c)a=c(a)}for(var u in this.header){i.setRequestHeader(u,this.header[u])}i.send(a);return this};y.Request=v;function y(t,e){if("function"==typeof e){return new v("GET",t).end(e)}if(1==arguments.length){return new v("GET",t)}return new v(t,e)}y.get=function(t,e,i){var n=y("GET",t);if("function"==typeof e)i=e,e=null;if(e)n.query(e);if(i)n.end(i);return n};y.head=function(t,e,i){var n=y("HEAD",t);if("function"==typeof e)i=e,e=null;if(e)n.send(e);if(i)n.end(i);return n};y.del=function(t,e){var i=y("DELETE",t);if(e)i.end(e);return i};y.patch=function(t,e,i){var n=y("PATCH",t);if("function"==typeof e)i=e,e=null;if(e)n.send(e);if(i)n.end(i);return n};y.post=function(t,e,i){var n=y("POST",t);if("function"==typeof e)i=e,e=null;if(e)n.send(e);if(i)n.end(i);return n};y.put=function(t,e,i){var n=y("PUT",t);if("function"==typeof e)i=e,e=null;if(e)n.send(e);if(i)n.end(i);return n};t.exports=y});t.register("component-trim/index.js",function(t,e,i){e=t.exports=n;function n(t){return t.replace(/^\s*|\s*$/g,"")}e.left=function(t){return t.replace(/^\s*/,"")};e.right=function(t){return t.replace(/\s*$/,"")}});t.register("redventures-reduce/index.js",function(t,e,i){t.exports=function(t,e,i){var n=0;var r=t.length;var s=arguments.length==3?i:t[n++];while(n<r){s=e.call(null,s,t[n],++n,t)}return s}});t.register("component-querystring/index.js",function(t,e,i){var n=i("trim"),r=i("reduce");e.parse=function(t){if("string"!=typeof t)return{};t=n(t);if(""==t)return{};return r(t.split("&"),function(t,e){var i=e.split("=");t[i[0]]=null==i[1]?"":decodeURIComponent(i[1]);return t},{})};e.stringify=function(t){if(!t)return"";var e=[];for(var i in t){e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]))}return e.join("&")}});t.register("component-emitter/index.js",function(t,e,i){t.exports=n;function n(t){if(t)return r(t)}function r(t){for(var e in n.prototype){t[e]=n.prototype[e]}return t}n.prototype.on=function(t,e){this._callbacks=this._callbacks||{};(this._callbacks[t]=this._callbacks[t]||[]).push(e);return this};n.prototype.once=function(t,e){var i=this;this._callbacks=this._callbacks||{};function n(){i.off(t,n);e.apply(this,arguments)}e._off=n;this.on(t,n);return this};n.prototype.off=function(t,e){this._callbacks=this._callbacks||{};var i=this._callbacks[t];if(!i)return this;if(1==arguments.length){delete this._callbacks[t];return this}var n=i.indexOf(e._off||e);if(~n)i.splice(n,1);return this};n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var n=0,r=i.length;n<r;++n){i[n].apply(this,e)}}return this};n.prototype.listeners=function(t){this._callbacks=this._callbacks||{};return this._callbacks[t]||[]};n.prototype.hasListeners=function(t){return!!this.listeners(t).length}});t.register("component-inherit/index.js",function(t,e,i){t.exports=function(t,e){var i=function(){};i.prototype=e.prototype;t.prototype=new i;t.prototype.constructor=t}});t.register("yields-merge/index.js",function(t,e,i){t.exports=function(t,e){for(var i in e)t[i]=e[i];return t}});t.register("component-object/index.js",function(t,e,i){var n=Object.prototype.hasOwnProperty;e.keys=Object.keys||function(t){var e=[];for(var i in t){if(n.call(t,i)){e.push(i)}}return e};e.values=function(t){var e=[];for(var i in t){if(n.call(t,i)){e.push(t[i])}}return e};e.merge=function(t,e){for(var i in e){if(n.call(e,i)){t[i]=e[i]}}return t};e.length=function(t){return e.keys(t).length};e.isEmpty=function(t){return 0==e.length(t)}});t.register("everyplay-js/lib/sdk.js",function(t,e,i){var n=i("./api");var r=i("./auth");var s=i("./dialog");var o=i("./widget");s.handle();var a=function(t){t.base=t.base||"https://api.everyplay.com";t.site=t.site||"https://everyplay.com";this.options=t;this.client_id=t.client_id;if(!this.client_id){throw new Error("client_id is requred.")}this.api=new n(this);this.auth=new r(this)};var c=a.prototype;c.get=function(t,e,i){this.api.get(t,e,i)};c.post=function(t,e,i){this.api.post(t,e,i)};c.put=function(t,e,i){this.api.put(t,e,i)};c.del=function(t,e,i){this.api.del(t,e,i)};c.accessToken=function(t){return this.auth.accessToken(t)};c.connect=function(t){return this.auth.connect(t)};c.accessToken=function(t){return this.auth.accessToken(t)};var u=null;e.initialize=function(t){u=new a(t);return u};e.accessToken=function(t){return u.accessToken(t)};e.get=function(t,e,i){u.api.get(t,e,i)};e.post=function(t,e,i){u.api.post(t,e,i)};e.put=function(t,e,i){u.api.put(t,e,i)};e.del=function(t,e,i){u.api.del(t,e,i)};e.connect=function(t){u.connect(t)};e.dialog=function(t,e,i){return s.dialog(t,e,i)};e.oEmbed=function(){};e.Dialog=s;e.Widget=o});t.register("everyplay-js/lib/api.js",function(t,e,i){var n=i("url");var r=i("superagent");var s=i("querystring");var o=i("object");var a=i("./sdk");var c=function(t){this.options=t.options;this.sdk=t;this.base=this.options.base};var u=c.prototype;u.get=function(t,e,i){this.apiRequest("GET",t,e,i)};u.post=function(t,e,i){this.apiRequest("POST",t,e,i)};u.put=function(t,e,i){this.apiRequest("PUT",t,e,i)};u.del=function(t,e,i){this.apiRequest("DELETE",t,e,i)};u.requestUrl=function(t,e){if(n.isRelative(t)){t=this.base+t}var i=n.parse(t);if(i.query){i.query=s.parse(i.query)}else{i.query={}}e=e||{};Object.keys(e).forEach(function(t){i.query[t]=e[t]});var r=a.accessToken();if(!r&&this.options.client_id){i.query["client_id"]=this.options.client_id}return i};u.apiRequest=function(t,e,i,n){var s;if(!n){n=i;i={}}e=this.requestUrl(e,i);e.query.format="json";s=e.query;e.query={};var o=e.protocol+e.host+e.pathname;var c=r[t.toLowerCase()](o);if(t!="GET"){c.send(s)}else{c.query(s)}if(a.accessToken()){c.set("Authorization","Bearer "+a.accessToken())}c.set("Accept","application/json");c.end(function(t,e){if(!t&&e.error){t=new Error("HTTP Error "+e.status)}return n(t,e)})};t.exports=c});t.register("everyplay-js/lib/dialog.js",function(t,e,i){var n=i("url");var r=i("querystring");var s=i("inherit");var o=i("merge");var a="Everyplay_Dialog";function c(){return[a,Math.ceil(Math.random()*1e6).toString(16)].join("_")}function u(t,e){e=e||{};e.url=t;e=o(e,{location:t,left:window.screenX+(window.outerWidth-e.width)/2,top:window.screenY+(window.outerHeight-e.height)/2,scrollbars:"yes"});var i=[];for(var n in e){if(e.hasOwnProperty(n)){i.push(n+"="+e[n])}}return window.open(t,e.name,i.join(", "))}function l(t){var e=n.parse(t.location.toString());e.query=r.parse(e.query);if(e.hash&&e.hash.length){e.hash=r.parse(e.hash.substring(1))}var i=e.query.state||e.hash.state;if(p(i)){return i}return null}function p(t){return(t||"").match(new RegExp("^"+a))}var h=function(t,e){if(typeof t=="function"){callback=t;t={}}this.params=[];this.sdk=e;this.options=e.options;this.dialogOptions=t;this.callback=t.callback;this.base=this.options.base;this.site=this.options.site;this.id=c()};var f=h.prototype;f.paramsFromWindow=function(t){var e={};var i=n.parse(t.location.toString());i.query=r.parse(i.query);if(i.hash&&i.hash.length){i.hash=r.parse(i.hash.substring(1))}if(i.hash){e=o(e,i.hash)}if(i.query){e=o(e,i.query)}return e};f.handleReturn=function(t){var e=this.paramsFromWindow(this.dialogOptions.window);if(this.dialogOptions.window&&!this.dialogOptions.retain){this.dialogOptions.window.close()}if(this.callback){return this.callback(e)}};f.url=function(t){var e=this;if(n.isRelative(t)){t=this.options.base+t}var i={};this.params.forEach(function(t){if(e.dialogOptions[t]){i[t]=e.dialogOptions[t]}});i.state=this.id;t+="?"+r.stringify(i);return t};f.open=function(){var t=this.url(this.site+this.path);if(this.dialogOptions.window){this.dialogOptions.window.location=t}else{this.dialogOptions.window=u(t,this.dialogOptions)}};var d=function(t,e){h.call(this,t,e);this.name="connect";this.path="/connect";this.params=["client_id","redirect_uri","state","response_type","scope","display"];this.dialogOptions.width=320;this.dialogOptions.height=480};ConnectDialogPrototype=d.prototype;s(d,h);var v={};e.dialogs={Connect:d};e.dialog=function(t,i,n,r){n.callback=r;var s=new e.dialogs[i](n,t);v[s.id]=s;s.open();return s};e.handle=function(){var t=l(window);if(t){var e=navigator.userAgent.match(/OS 5(_\d)+ like Mac OS X/i);if(e){window.opener.EP.Dialog.handleReturn(window)}else if(window.opener){window.opener.setTimeout(function(){window.opener.EP.Dialog.handleReturn(window)},1)}else if(window.top){window.top.setTimeout(function(){window.top.EP.Dialog.handleReturn(window)},1)}}};e.handleReturn=function(t){var e=l(t);if(e){var i=v[e];if(i){i.handleReturn();delete v[e]}}}});t.register("everyplay-js/lib/auth.js",function(t,e,i){var n=i("./dialog");var r=function(t){this.storage=window.localStorage;this.sdk=t;this.options=t.options;this.token=this.storage.getItem("EP.accessToken");this.dialogOptions={client_id:this.options.client_id,redirect_uri:this.options.redirect_uri,response_type:"token",scope:this.options.scope||"basic",display:"popup",window:this.options.window,retain:this.options.retain};this.dialogWindow=null};var s=r.prototype;s.accessToken=function(t){if(t===undefined&&this.token!==undefined){return this.token}if(t===null){this.token=undefined;return this.storage.removeItem("EP.accessToken")}else if(t===undefined){this.token=this.storage.getItem("EP.accessToken");return this.token}else{this.token=t;return this.storage.setItem("EP.accessToken",t)}};s.connect=function(t){var e=this;if(this.connected()){return t(null,this.accessToken())}this.dialog=n.dialog(this.sdk,"Connect",this.dialogOptions,function(i){var n;if(i.error){n=new Error("OAuth2 error:"+i.error+" description:"+i.error_description)}if(i.access_token){e.accessToken(i.access_token)}return t(n,e.accessToken())});this.dialogWindow=this.dialog.options.window};s.connected=function(){return this.accessToken()!=null};t.exports=r});t.register("everyplay-js/lib/widget.js",function(t,e,i){var n=i("emitter");var r=i("querystring");function s(t){var e=this;a.call(this,"init",[],function(){e.emit(u.Events.READY)})}function o(){var t=this;if(this._iframe.src&&this._iframe.src.length>0){this._iframe.onload=function(){s.call(t,function(){t._initialized=true})}}window.addEventListener("message",function(e){if(t._iframe.src.indexOf(e.origin)===-1){}var i=e.data;if(typeof i==="string"){try{i=JSON.parse(i)}catch(n){}}if(i.event_type){t.emit.apply(t,[i.event_type].concat(i.args||[]))}else if(i.callback_id!==undefined){var r=i.args||[];var s=i.callback_id;if(t._callbacks[s]){t._callbacks[s].apply(t,r)}}},false)}function a(t,e,i){if(this._iframe==null){return}if(i){var n=this._next_callback_id++;this._callbacks[n]=i}this._iframe.contentWindow.postMessage(JSON.stringify({fn:t,args:e,callback_id:n}),this._iframe.src)}function c(t,e,i){return function(){var n=this;var r=Array.prototype.slice.call(arguments);function s(){a.call(n,t,r.splice(0,e),i?r.pop():null)}if(this._initialized){s()}else{n.once(u.Events.READY,function(){s()})}}}var u=function(t){n.call(this);this._iframe=typeof t==="string"?document.getElementById(t):t;this._next_callback_id=0;this._callbacks=[];this._initialized=false;o.call(this)};var l=u.prototype=new n;l.constructor=u;l.load=c("load",2,false);l.play=c("play",0,false);l.pause=c("pause",0,false);l.seekTo=c("seekTo",1,false);l.next=c("next",0,false);l.prev=c("prev",0,false);l.skip=c("skip",1,false);l.toggle=c("toggle");l.getVolume=c("getVolume",0,true);l.getDuration=c("getDuration",0,true);l.getPosition=c("getPosition",0,true);l.getVideos=c("getVideos",0,true);l.getCurrentVideo=c("getCurrentVideo",0,true);l.getCurrentVideoIndex=c("getCurrentVideoIndex",0,true);l.isPaused=c("isPaused",0,true);u.Events={LOAD_PROGRESS:"LOAD_PROGRESS",PLAY_PROGRESS:"PLAY_PROGRESS",PLAY:"PLAY",PAUSE:"PAUSE",FINISH:"FINISH",SEEK:"SEEK",READY:"READY",CLICK_EXTERNAL:"CLICK_EXTERNAL",OPEN_SHARE_PANEL:"OPEN_SHARE_PANEL",SHARE:"SHARE"};t.exports=u});t.register("everyplay-js/lib/oembed.js",function(t,e,i){var n=function(){};t.exports=n});t.alias("component-url/index.js","everyplay-js/deps/url/index.js");t.alias("visionmedia-superagent/lib/client.js","everyplay-js/deps/superagent/lib/client.js");t.alias("visionmedia-superagent/lib/client.js","everyplay-js/deps/superagent/index.js");t.alias("component-emitter/index.js","visionmedia-superagent/deps/emitter/index.js");t.alias("component-querystring/index.js","everyplay-js/deps/querystring/index.js");t.alias("component-trim/index.js","component-querystring/deps/trim/index.js");t.alias("redventures-reduce/index.js","component-querystring/deps/reduce/index.js");t.alias("component-emitter/index.js","everyplay-js/deps/emitter/index.js");t.alias("component-inherit/index.js","everyplay-js/deps/inherit/index.js");t.alias("yields-merge/index.js","everyplay-js/deps/merge/index.js");t.alias("component-object/index.js","everyplay-js/deps/object/index.js");t.alias("everyplay-js/lib/sdk.js","everyplay-js/index.js");if("undefined"==typeof module){window.EP=t("everyplay-js")}else{module.exports=t("everyplay-js")}})();